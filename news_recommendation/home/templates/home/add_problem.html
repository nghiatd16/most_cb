{% extends 'base/base_battle.html' %}
{% load static %}
{% load add_attr %}
{% block content %}
<!-- BEGIN CONTAINER -->
<div class="page-container">
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
   <!-- BEGIN CONTENT -->
   <div class="page-content-wrapper">
      <!-- BEGIN CONTENT BODY -->
      <!-- BEGIN PAGE CONTENT BODY -->
      <div class="page-content" style="min-height: 376px;">
         <div class="container-fluid">
            <div class="row">
               <div class="col-md-12">
                  <!-- BEGIN PORTLET-->
                  <form method="post" action="" enctype="multipart/form-data">
                     <div class="portlet light bordered">
                        {% csrf_token %}
                        <div class="portlet-title tabbable-line">
                           <div class="caption">
                              <i class="icon-globe font-dark hide"></i>
                              <span class="caption-subject font-blue-madison bold">Proptit Polygon</span>
                           </div>
                           <button type="submit" class="btn green pull-right"><i class="fa fa-plus">&nbsp;</i>Add Problem</button>
                        </div>
                        <div class="portlet-body">
                           <div class="row">
                              <div class="col-md-12">
                                 <p>
                                 <div class="col-md-2" style="line-height: 30px; margin: auto">Short Name <span style="color: red;">*</span>:</div>
                                 <div class="col-md-1">
                                    <input type="text" name="short_name" class="form-control" required>
                                 </div>
                                 </p>
                              </div>
                           </div>
                           <div class="row">
                              <div class="col-md-12">
                                 <p>
                                 <div class="col-md-2" style="line-height: 30px;">Full Name <span style="color: red;">*</span> :</div>
                                 <div class="col-md-3">
                                    {{ form.name|add_attr:"type:text,name:full_name,class:form-control"}}
                                 </div>
                                 </p>
                              </div>
                           </div>
                           <div class="row">
                              <div class="col-md-12">
                                 <p>
                                 <div class="col-md-2" style="line-height: 30px;">Statement <span style="color: red;">*</span>:</div>
                                 <div class="col-md-9">
                                    {% comment %} <textarea name="statement" class="summernote"></textarea> {% endcomment %}
                                    {{ form.statement|add_attr:"name:statement,class:summernote" }}
                                 </div>
                                 </p>
                              </div>
                           </div>
                           <div class="row">
                              <div class="col-md-12">
                                 <p>
                                 <div class="col-md-2" style="line-height: 30px;">Time Limit <span style="color: red;">*</span>:</div>
                                 <div class="col-md-1">
                                    {% comment %} <input type="number" step="0.1" min="0.2" max="10" value="2" name="time_limit" class="form-control" required> {% endcomment %}
                                    {{ form.time_limit|add_attr:"step:0.1,min:0.2,max:10,value:2,class:form-control" }}
                                 </div>
                                 <div class="col-md-1" style="line-height: 30px;">second(s)</div>
                                 </p>
                              </div>
                           </div>
                           <div class="row">
                              <div class="col-md-12">
                                 <p>
                                 <div class="col-md-2" style="line-height: 30px;">Memory Limit <span style="color: red;">*</span>:</div>
                                 <div class="col-md-1">
                                    {% comment %} <input type="number" min="1" max="512" value="128" name="memory_limit" class="form-control" required> {% endcomment %}
                                    {{ form.memory_limit|add_attr:"min:1,max:512,value:128,name:memory_limit,class:form-control" }}
                                 </div>
                                 <div class="col-md-1" style="line-height: 30px;">MB</div>
                                 </p>
                              </div>
                           </div>
                           <!--<div class="row">
                              <div class="col-md-12">
                                  <p>
                                  <div class="col-md-2" style="line-height: 30px;">Score <span style="color: red;">*</span>:</div>
                                  <div class="col-md-1">
                                      <input type="number" min="0" max="1000" value="0" name="score" class="form-control" required>
                                      
                                  </div>
                                  <div class="col-md-1" style="line-height: 30px;"> điểm</div>
                                  </p>
                              </div>
                              </div>-->
                           <div class="row">
                              <div class="col-md-12">
                                 <p>
                                 <div class="col-md-2" style="line-height: 30px;">Double Error <span style="color: red;">*</span>:</div>
                                 <div class="col-md-1">
                                    <input type="number" min="0" max="1" value="0" step="0.000001" name="double_error" class="form-control" required>
                                 </div>
                                 <div class="col-md-1" style="line-height: 30px;"></div>
                                 </p>
                              </div>
                           </div>
                           <div class="row">
                              <div class="col-md-12">
                                 <p>
                                 <div class="col-md-2" style="line-height: 30px;">Solution Language <span style="color: red;">*</span>:</div>
                                 <div class="col-md-1">
                                    {{ form.choice|add_attr:"class:form-control"}}
                                 </div>
                                 </p>
                              </div>
                           </div>
                           <div class="row">
                              <div class="col-md-12">
                                 <p>
                                 <div class="col-md-2" style="line-height: 30px;">Solution <span style="color: red;">*</span>:</div>
                                 <div id="solution_source" style="width:800px;height:600px;border:1px solid grey" class="col-md-3">
                                    {% comment %} <input type="file" name="solution" class="form-control" required> {% endcomment %}
                                    {% comment %} {{ form.solution_source|add_attr:"name:solution,id:solution_source"}} {% endcomment %}
                                 </div>
                                 </p>
                              </div>
                           </div>
                           <div class="row">
                              <div class="col-md-12">
                                 <p>
                                 <div class="col-md-2" style="line-height: 30px;">Testcase <span style="color: red;">*</span>:</div>
                                 <div class="col-md-3">
                                    {% comment %} <input type="file" name="testcase" class="form-control" required> {% endcomment %}
                                    {{ form.test_case }}
                                 </div>
                                 </p>
                              </div>
                           </div>
                           {% comment %} 
                           <div class="row">
                              <div class="col-md-12">
                                 <p>
                                 <div class="col-md-2" style="line-height: 30px;">Input File Pattern <span style="color: red;">*</span>:</div>
                                 <div class="col-md-1">
                                    <input type="text" name="file_name_pattern" class="form-control" value="*.in" required>
                                 </div>
                                 </p>
                              </div>
                           </div>
                           {% endcomment %}
                           <div class="row">
                              <div class="col-md-12">
                                 <p>
                                 <div class="col-md-2" style="line-height: 30px;">Checker</div>
                                 <div class="col-md-5">
                                    {% comment %} <input type="checkbox" name="activate_input_validator" class="form-control"> {% endcomment %}
                                    {{ form.checker }}
                                 </div>
                                 </p>
                              </div>
                           </div>
                           {% comment %} 
                           <div class="row">
                              <div class="col-md-12">
                                 <p>
                                 <div class="col-md-2" style="line-height: 30px;">Custom Checker:</div>
                                 <div class="col-md-3">
                                    <input type="file" name="custom_checker" class="form-control">
                                 </div>
                                 </p>
                              </div>
                           </div>
                           {% endcomment %}
                           {% comment %} 
                           <div class="row">
                              <div class="col-md-12">
                                 <p>
                                 <div class="col-md-2" style="line-height: 30px;">Use checker to validate solution:</div>
                                 <div class="col-md-1">
                                    <input type="checkbox" name="validate_solution" class="form-control">
                                 </div>
                                 </p>
                              </div>
                           </div>
                           {% endcomment %}
                           <div class="row">
                              <div class="col-md-12">
                                 <p>
                                 <div class="col-md-2" style="line-height: 30px;">Validator</div>
                                 <div class="col-md-5">
                                    {% comment %} <input type="checkbox" name="activate_input_validator" class="form-control"> {% endcomment %}
                                    {{ form.validator|add_attr:"name:validator,class:form-control" }}
                                 </div>
                                 </p>
                              </div>
                           </div>
                           {% comment %} 
                           <div class="row">
                              <div class="col-md-12">
                                 <p>
                                 <div class="col-md-2" style="line-height: 30px;">Input Validator:</div>
                                 <div class="col-md-3">
                                    <input type="file" name="input_validator" class="form-control">
                                 </div>
                                 </p>
                              </div>
                           </div>
                           {% endcomment %}
                        </div>
                     </div>
               </div>
               </form>
               <!-- END PORTLET-->
            </div>
         </div>
      </div>
   </div>
   <!-- END PAGE CONTENT BODY -->
   <!-- END CONTENT BODY -->
</div>
<!-- END CONTENT -->
</div>
<script>
   $(document).ready(function() {
       $('.summernote').summernote({height:400});
   });
   
   require.config({ paths: { 'vs': 'https://unpkg.com/monaco-editor@latest/min/vs' }});
   window.MonacoEnvironment = { getWorkerUrl: () => proxy };
   
   let proxy = URL.createObjectURL(new Blob([`
   	self.MonacoEnvironment = {
   		baseUrl: 'https://unpkg.com/monaco-editor@latest/min/'
   	};
   	importScripts('https://unpkg.com/monaco-editor@latest/min/vs/base/worker/workerMain.js');
   `], { type: 'text/javascript' }));
   
   require(["vs/editor/editor.main"], function () {
   	var editor = monaco.editor.create(document.getElementById('solution_source'), {
   		value: [
   			'function x() {',
   			'\tconsole.log("Hello world!");',
   			'}'
   		].join('\n'),
   		language: 'python',
   		theme: 'vs-dark'
   	});
       console.log(editor.getValue());
   });
   //var value = window.editor.getValue();
   
   
   
</script>
<!-- END CONTAINER -->
{% endblock %}